function createSubmissionTemplateZS2017(submission_name,path_in,ZS)
% function createSubmissionTemplateZS2017(submission_name,path_in,ZS)

authors = {'Maria Andrea Cruz Blandon','Okko Rasanen'};
affiliation = 'Tampere University';

if nargin <2
    ZSpath = sprintf('/Users/rasaneno/rundata/ZS2020/%s/',submission_name);
else
    ZSpath = [path_in '/' submission_name '/'];
end

if nargin <3
    ZS = [];
end

languages = {'english','french','mandarin','LANG1','LANG2'};
durations = {'1s','10s','120s'};

if ~exist(ZSpath,'dir')
    mkdir(ZSpath);
    mkdir([ZSpath '/2017/']);
    mkdir([ZSpath '/2017/code/']);
    mkdir([ZSpath '/2017/track1/']);
    for k = 1:length(languages)
        for j = 1:length(durations)
            mkdir([ZSpath sprintf('/2017/track1/%s/%s/',languages{k},durations{j})]);
        end
    end
    mkdir([ZSpath '/2017/track2/']);
else
    fprintf('Proposed submission template/folder structure already exists at %s\nOverwriting will destroy all existing data.\n',ZSpath);
    resp = input('Continue? (y/n)','s');
    if(strcmp(resp,'y'))
        fprintf('overwriting...\n');
        rmdir(ZSpath,'s');
        mkdir(ZSpath);
        mkdir([ZSpath '/2017/']);
        mkdir([ZSpath '/2017/code/']);
        mkdir([ZSpath '/2017/track1/']);
        
        
        for k = 1:length(languages)
            for j = 1:length(durations)
                mkdir([ZSpath sprintf('/2017/track1/%s/%s/',languages{k},durations{j})]);
            end
        end
        mkdir([ZSpath '/2017/track2/']);
    else
        fprintf('aborting ...\n');
        return;
    end
end

% Create general metadata file for the submission
fid = fopen([ZSpath '/metadata.yaml'],'w');
fprintf(fid,'author:\n');
fprintf(fid,'\t');
for j = 1:length(authors)-1
    fprintf(fid,[authors{j} ', ']);
end
fprintf(fid,[authors{end}]);        
fprintf(fid,'\n');
fprintf(fid,'affiliation:\n');
fprintf(fid,['\t' affiliation '\n']);
fprintf(fid,'open source:\n');
fprintf(fid,'\ttrue\n');
fclose(fid);

% Create ZS2017 challenge metadata file
fid = fopen([ZSpath '/2017/metadata.yaml'],'w');
fprintf(fid,'system description:\n');
fprintf(fid,'  a brief description of your system, pointing to a paper where possible\n');
fprintf(fid,'hyperparameters:\n');
fprintf(fid,'  values of all the hyperparameters\n');
fprintf(fid,'track1 supervised:\n');
fprintf(fid,'  false\n');
fprintf(fid,'track2 supervised:\n');
fprintf(fid,'  false\n');
fclose(fid);


% If input data exists
if(~isempty(ZS))
    
    
languages = fields(ZS);

for langiter = 1:length(languages)   
    
    if(isfield(ZS.(languages{1}).test,'features_1') && isfield(ZS.(languages{1}).test,'features_1_t'))
        
    end
    
    if(isfield(ZS.(languages{1}).test,'features_10') && isfield(ZS.(languages{1}).test,'features_10_t'))
        filepath = [ZSpath sprintf('/2017/track1/%s/10/',languages{k},durations{j})]);
        writeTrack1Outputs(ZS.(languages{1}).test.features_10,ZS.(languages{1}).test.faetures_10_t,filepath);
        
    end
    
    if(isfield(ZS.(languages{1}).test,'features_120') && isfield(ZS.(languages{1}).test,'features_120_t'))
        
    end
    
    
    
end

    
end
    
    


